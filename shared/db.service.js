"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/http");
var Observable_1 = require("rxjs/Observable");
require("rxjs/add/operator/catch");
require("rxjs/add/operator/do");
require("rxjs/add/operator/map");
var DbService = /** @class */ (function () {
    function DbService(http) {
        this.http = http;
        this.apiUrl = "http://maintek.azurewebsites.net/api/";
        this.appKey = "";
        this.authHeader = "";
    }
    DbService.prototype.getCommonHeaders = function () {
        var headers = new http_1.Headers();
        headers.append("Content-Type", "application/json");
        headers.append("Authorization", this.authHeader);
        return headers;
    };
    DbService.prototype.handleErrors = function (error) {
        console.log(JSON.stringify(error.json()));
        return Observable_1.Observable.throw(error);
    };
    //###############################
    // USER
    //###############################
    DbService.prototype.getUser = function (id) {
        return this.http.post(this.apiUrl + "user/Get" + this.appKey, JSON.stringify({
            use_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.addUser = function (user, pwd, share) {
        return this.http.post(this.apiUrl + "user/Add" + this.appKey, JSON.stringify({
            prm_name: user,
            prm_pwd: pwd,
            prm_share: share
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.removeUser = function (id) {
        return this.http.post(this.apiUrl + "user/Remove" + this.appKey, JSON.stringify({
            use_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.checkUser = function (user, pwd) {
        return this.http.post(this.apiUrl + "user/Check" + this.appKey, JSON.stringify({
            user: user,
            pwd: pwd
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setUserImg = function (id, img) {
        return this.http.post(this.apiUrl + "user/SetImg" + this.appKey, JSON.stringify({
            prm_id: id,
            prm_img: img
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setUserName = function (id, name) {
        return this.http.post(this.apiUrl + "user/SetName" + this.appKey, JSON.stringify({
            prm_id: id,
            prm_name: name
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setUserShare = function (id, share) {
        return this.http.post(this.apiUrl + "user/SetShare" + this.appKey, JSON.stringify({
            prm_id: id,
            prm_share: share
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // FICHE
    //###############################
    DbService.prototype.getFiche = function (id) {
        return this.http.post(this.apiUrl + "fiche/Get" + this.appKey, JSON.stringify({
            fic_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.addFiche = function (titre, url, mediatek) {
        return this.http.post(this.apiUrl + "fiche/Add" + this.appKey, JSON.stringify({
            prm_titre: titre,
            prm_url: url,
            prm_mediatek: mediatek
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.removeFiche = function (id) {
        return this.http.post(this.apiUrl + "fiche/Remove" + this.appKey, JSON.stringify({
            fic_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // MEDIATEK
    //###############################
    DbService.prototype.getMediatek = function (id) {
        return this.http.post(this.apiUrl + "mediatek/Get" + this.appKey, JSON.stringify({
            mediatek_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.getMediatekFiches = function (id) {
        return this.http.post(this.apiUrl + "mediatek/GetFiche" + this.appKey, JSON.stringify({
            mediatek_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.mediatekAddFiche = function (med_id, fic_id) {
        return this.http.post(this.apiUrl + "mediatek/AddFiche" + this.appKey, JSON.stringify({
            mediatek_id: med_id,
            fic_id: fic_id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.mediatekRemoveFiche = function (med_id, fic_id) {
        return this.http.post(this.apiUrl + "mediatek/RemoveFiche" + this.appKey, JSON.stringify({
            mediatek_id: med_id,
            fic_id: fic_id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // GROUPE
    //###############################
    DbService.prototype.getGroupe = function (id) {
        return this.http.post(this.apiUrl + "groupe/Get" + this.appKey, JSON.stringify({
            gro_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.getGroupeUsers = function (id) {
        return this.http.post(this.apiUrl + "groupe/GetUsers" + this.appKey, JSON.stringify({
            gro_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.userGetGroupes = function (id) {
        return this.http.post(this.apiUrl + "groupe/UserGetGroupes" + this.appKey, JSON.stringify({
            use_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setGroupeImg = function (id, img) {
        return this.http.post(this.apiUrl + "groupe/SetImg" + this.appKey, JSON.stringify({
            gro_id: id,
            prm_img: img
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setGroupeName = function (id, name) {
        return this.http.post(this.apiUrl + "groupe/SetName" + this.appKey, JSON.stringify({
            gro_id: id,
            prm_name: name
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setGroupeShare = function (id, share) {
        return this.http.post(this.apiUrl + "groupe/SetShare" + this.appKey, JSON.stringify({
            gro_id: id,
            prm_share: share
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.groupeAddUser = function (gro_id, use_id) {
        return this.http.post(this.apiUrl + "groupe/AddUser" + this.appKey, JSON.stringify({
            gro_id: gro_id,
            use_id: use_id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.groupeRemoveUser = function (gro_id, use_id) {
        return this.http.post(this.apiUrl + "groupe/RemoveUser" + this.appKey, JSON.stringify({
            gro_id: gro_id,
            use_id: use_id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.removeGroupe = function (id) {
        return this.http.post(this.apiUrl + "groupe/Remove" + this.appKey, JSON.stringify({
            gro_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // NOTES
    //###############################
    DbService.prototype.getNotes = function (id) {
        return this.http.post(this.apiUrl + "note/Get" + this.appKey, JSON.stringify({
            fic_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.addNote = function (use_id, fic_id, note) {
        return this.http.post(this.apiUrl + "note/Add" + this.appKey, JSON.stringify({
            use_id: use_id,
            fic_id: fic_id,
            prm_note: note
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setNote = function (id, note) {
        return this.http.post(this.apiUrl + "note/Set" + this.appKey, JSON.stringify({
            not_id: id,
            prm_note: note
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // AVIS
    //###############################
    DbService.prototype.getAvis = function (id) {
        return this.http.post(this.apiUrl + "avis/Get" + this.appKey, JSON.stringify({
            fic_id: id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.addAvis = function (use_id, fic_id, avis) {
        return this.http.post(this.apiUrl + "avis/Add" + this.appKey, JSON.stringify({
            use_id: use_id,
            fic_id: fic_id,
            prm_avis: avis
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setAvis = function (id, avis) {
        return this.http.post(this.apiUrl + "note/Set" + this.appKey, JSON.stringify({
            not_id: id,
            prm_avis: avis
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // Visionner
    //###############################
    DbService.prototype.getVisionner = function (use_id, fic_id) {
        return this.http.post(this.apiUrl + "visionner/Get" + this.appKey, JSON.stringify({
            use_id: use_id,
            fic_id: fic_id
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.addVisionner = function (use_id, fic_id) {
        return this.http.post(this.apiUrl + "visionner/Add" + this.appKey, JSON.stringify({
            use_id: use_id,
            fic_id: fic_id,
            prm_status: 0
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.setVisionner = function (use_id, fic_id, status) {
        return this.http.post(this.apiUrl + "visionner/Set" + this.appKey, JSON.stringify({
            use_id: use_id,
            fic_id: fic_id,
            prm_status: status
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    //###############################
    // OMDB
    //###############################
    DbService.prototype.omdbSearch = function (search) {
        return this.http.post(this.apiUrl + "Omdb/Search" + this.appKey, JSON.stringify({
            titre: search
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService.prototype.omdbGet = function (name) {
        return this.http.post(this.apiUrl + "Omdb/Get" + this.appKey, JSON.stringify({
            titre: name
        }), { headers: this.getCommonHeaders() })
            .catch(this.handleErrors);
    };
    DbService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], DbService);
    return DbService;
}());
exports.DbService = DbService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRiLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMkM7QUFDM0Msc0NBQXdEO0FBQ3hELDhDQUE2QztBQUM3QyxtQ0FBaUM7QUFDakMsZ0NBQThCO0FBQzlCLGlDQUErQjtBQUkvQjtJQUNJLG1CQUFvQixJQUFVO1FBQVYsU0FBSSxHQUFKLElBQUksQ0FBTTtRQUM5QixXQUFNLEdBQUcsdUNBQXVDLENBQUM7UUFDakQsV0FBTSxHQUFHLEVBQUUsQ0FBQztRQUNaLGVBQVUsR0FBRyxFQUFFLENBQUM7SUFIaUIsQ0FBQztJQUtsQyxvQ0FBZ0IsR0FBaEI7UUFDSSxJQUFJLE9BQU8sR0FBRyxJQUFJLGNBQU8sRUFBRSxDQUFDO1FBQzVCLE9BQU8sQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDLENBQUM7UUFDbkQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQUVELGdDQUFZLEdBQVosVUFBYSxLQUFlO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBQ0QsaUNBQWlDO0lBQ2pDLE9BQU87SUFDUCxpQ0FBaUM7SUFDakMsMkJBQU8sR0FBUCxVQUFRLEVBQUU7UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNELDJCQUFPLEdBQVAsVUFBUSxJQUFJLEVBQUMsR0FBRyxFQUFDLEtBQUs7UUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsUUFBUSxFQUFFLElBQUk7WUFDZCxPQUFPLEVBQUUsR0FBRztZQUNaLFNBQVMsRUFBRSxLQUFLO1NBQ2YsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQ0QsOEJBQVUsR0FBVixVQUFXLEVBQUU7UUFDVCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3pDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNELDZCQUFTLEdBQVQsVUFBVSxJQUFJLEVBQUMsR0FBRztRQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDeEMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLElBQUksRUFBRSxJQUFJO1lBQ1YsR0FBRyxFQUFFLEdBQUc7U0FDUCxDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFDRCw4QkFBVSxHQUFWLFVBQVcsRUFBRSxFQUFDLEdBQUc7UUFDYixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3pDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtZQUNWLE9BQU8sRUFBRSxHQUFHO1NBQ1gsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQ0QsK0JBQVcsR0FBWCxVQUFZLEVBQUUsRUFBQyxJQUFJO1FBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLGNBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUMxQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLEVBQUU7WUFDVixRQUFRLEVBQUUsSUFBSTtTQUNiLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNELGdDQUFZLEdBQVosVUFBYSxFQUFFLEVBQUMsS0FBSztRQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzNDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtZQUNWLFNBQVMsRUFBRSxLQUFLO1NBQ2YsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBR0gsaUNBQWlDO0lBQ2pDLFFBQVE7SUFDUixpQ0FBaUM7SUFDL0IsNEJBQVEsR0FBUixVQUFTLEVBQUU7UUFDUCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3ZDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNELDRCQUFRLEdBQVIsVUFBUyxLQUFLLEVBQUUsR0FBRyxFQUFFLFFBQVE7UUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUN2QyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsU0FBUyxFQUFFLEtBQUs7WUFDaEIsT0FBTyxFQUFFLEdBQUc7WUFDWixZQUFZLEVBQUUsUUFBUTtTQUNyQixDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFDRCwrQkFBVyxHQUFYLFVBQVksRUFBRTtRQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxjQUFjLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDMUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLE1BQU0sRUFBRSxFQUFFO1NBQ1QsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUgsaUNBQWlDO0lBQ2pDLFdBQVc7SUFDWCxpQ0FBaUM7SUFDakMsK0JBQVcsR0FBWCxVQUFZLEVBQUU7UUFDWixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzFDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixXQUFXLEVBQUUsRUFBRTtTQUNkLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELHFDQUFpQixHQUFqQixVQUFrQixFQUFFO1FBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsV0FBVyxFQUFFLEVBQUU7U0FDZCxDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCxvQ0FBZ0IsR0FBaEIsVUFBaUIsTUFBTSxFQUFFLE1BQU07UUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLG1CQUFtQixHQUFHLElBQUksQ0FBQyxNQUFNLEVBQy9DLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixXQUFXLEVBQUUsTUFBTTtZQUNuQixNQUFNLEVBQUUsTUFBTTtTQUNiLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELHVDQUFtQixHQUFuQixVQUFvQixNQUFNLEVBQUUsTUFBTTtRQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDbEQsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLFdBQVcsRUFBRSxNQUFNO1lBQ25CLE1BQU0sRUFBRSxNQUFNO1NBQ2IsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0QsaUNBQWlDO0lBQ2pDLFNBQVM7SUFDVCxpQ0FBaUM7SUFDakMsNkJBQVMsR0FBVCxVQUFVLEVBQUU7UUFDVixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3hDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGtDQUFjLEdBQWQsVUFBZSxFQUFFO1FBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLGlCQUFpQixHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzdDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGtDQUFjLEdBQWQsVUFBZSxFQUFFO1FBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLHVCQUF1QixHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ25ELElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGdDQUFZLEdBQVosVUFBYSxFQUFFLEVBQUMsR0FBRztRQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzNDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtZQUNWLE9BQU8sRUFBRSxHQUFHO1NBQ1gsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0QsaUNBQWEsR0FBYixVQUFjLEVBQUUsRUFBRSxJQUFJO1FBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUM1QyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLEVBQUU7WUFDVixRQUFRLEVBQUUsSUFBSTtTQUNiLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGtDQUFjLEdBQWQsVUFBZSxFQUFFLEVBQUMsS0FBSztRQUNyQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDN0MsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLE1BQU0sRUFBRSxFQUFFO1lBQ1YsU0FBUyxFQUFFLEtBQUs7U0FDZixDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCxpQ0FBYSxHQUFiLFVBQWMsTUFBTSxFQUFFLE1BQU07UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLGdCQUFnQixHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzVDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsTUFBTTtZQUNkLE1BQU0sRUFBRSxNQUFNO1NBQ2IsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0Qsb0NBQWdCLEdBQWhCLFVBQWlCLE1BQU0sRUFBRSxNQUFNO1FBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLE1BQU07WUFDZCxNQUFNLEVBQUUsTUFBTTtTQUNiLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGdDQUFZLEdBQVosVUFBYSxFQUFFO1FBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLEVBQUU7U0FDVCxDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxpQ0FBaUM7SUFDakMsUUFBUTtJQUNSLGlDQUFpQztJQUNqQyw0QkFBUSxHQUFSLFVBQVMsRUFBRTtRQUNULE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLE1BQU0sRUFBRSxFQUFFO1NBQ1QsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0QsMkJBQU8sR0FBUCxVQUFRLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSTtRQUMxQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsTUFBTTtZQUNkLE1BQU0sRUFBRSxNQUFNO1lBQ2QsUUFBUSxFQUFFLElBQUk7U0FDYixDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCwyQkFBTyxHQUFQLFVBQVEsRUFBRSxFQUFFLElBQUk7UUFDZCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtZQUNWLFFBQVEsRUFBRSxJQUFJO1NBQ2IsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsaUNBQWlDO0lBQ2pDLE9BQU87SUFDUCxpQ0FBaUM7SUFDakMsMkJBQU8sR0FBUCxVQUFRLEVBQUU7UUFDUixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsRUFBRTtTQUNULENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELDJCQUFPLEdBQVAsVUFBUSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUk7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLE1BQU07WUFDZCxNQUFNLEVBQUUsTUFBTTtZQUNkLFFBQVEsRUFBRSxJQUFJO1NBQ2IsQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0QsMkJBQU8sR0FBUCxVQUFRLEVBQUUsRUFBRSxJQUFJO1FBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLEVBQUU7WUFDVixRQUFRLEVBQUUsSUFBSTtTQUFTLENBQUMsRUFDeEIsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxpQ0FBaUM7SUFDakMsWUFBWTtJQUNaLGlDQUFpQztJQUNqQyxnQ0FBWSxHQUFaLFVBQWEsTUFBTSxFQUFFLE1BQU07UUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2YsTUFBTSxFQUFFLE1BQU07WUFDZCxNQUFNLEVBQUUsTUFBTTtTQUNiLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELGdDQUFZLEdBQVosVUFBYSxNQUFNLEVBQUUsTUFBTTtRQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQzNDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixNQUFNLEVBQUUsTUFBTTtZQUNkLE1BQU0sRUFBRSxNQUFNO1lBQ2QsVUFBVSxFQUFFLENBQUM7U0FDWixDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCxnQ0FBWSxHQUFaLFVBQWEsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNO1FBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxlQUFlLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLE1BQU0sRUFBRSxNQUFNO1lBQ2QsTUFBTSxFQUFFLE1BQU07WUFDZCxVQUFVLEVBQUUsTUFBTTtTQUNqQixDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FDdkM7YUFDQSxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDQyxpQ0FBaUM7SUFDakMsT0FBTztJQUNQLGlDQUFpQztJQUNqQyw4QkFBVSxHQUFWLFVBQVcsTUFBTTtRQUNiLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxhQUFhLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDekMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNmLEtBQUssRUFBRSxNQUFNO1NBQ1osQ0FBQyxFQUNGLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQ3ZDO2FBQ0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQ0QsMkJBQU8sR0FBUCxVQUFRLElBQUk7UUFDWixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDZixLQUFLLEVBQUUsSUFBSTtTQUNWLENBQUMsRUFDRixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUN2QzthQUNBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQTNaUSxTQUFTO1FBRHJCLGlCQUFVLEVBQUU7eUNBRWlCLFdBQUk7T0FEckIsU0FBUyxDQTRackI7SUFBRCxnQkFBQztDQUFBLEFBNVpELElBNFpDO0FBNVpZLDhCQUFTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEh0dHAsIEhlYWRlcnMsIFJlc3BvbnNlIH0gZnJvbSBcIkBhbmd1bGFyL2h0dHBcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzL09ic2VydmFibGVcIjtcclxuaW1wb3J0IFwicnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2hcIjtcclxuaW1wb3J0IFwicnhqcy9hZGQvb3BlcmF0b3IvZG9cIjtcclxuaW1wb3J0IFwicnhqcy9hZGQvb3BlcmF0b3IvbWFwXCI7XHJcblxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRGJTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cDogSHR0cCkge31cclxuICAgIGFwaVVybCA9IFwiaHR0cDovL21haW50ZWsuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiO1xyXG4gICAgYXBwS2V5ID0gXCJcIjtcclxuICAgIGF1dGhIZWFkZXIgPSBcIlwiO1xyXG5cclxuICAgIGdldENvbW1vbkhlYWRlcnMoKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xyXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkF1dGhvcml6YXRpb25cIiwgdGhpcy5hdXRoSGVhZGVyKTtcclxuICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVFcnJvcnMoZXJyb3I6IFJlc3BvbnNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IuanNvbigpKSk7XHJcbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3coZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICAvLyBVU0VSXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICAgIGdldFVzZXIoaWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcInVzZXIvR2V0XCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICB1c2VfaWQ6IGlkXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgICAgICApXHJcbiAgICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICAgIH1cclxuICAgIGFkZFVzZXIodXNlcixwd2Qsc2hhcmUpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcInVzZXIvQWRkXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwcm1fbmFtZTogdXNlcixcclxuICAgICAgICAgICAgcHJtX3B3ZDogcHdkLFxyXG4gICAgICAgICAgICBwcm1fc2hhcmU6IHNoYXJlXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgICAgICApXHJcbiAgICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICAgIH1cclxuICAgIHJlbW92ZVVzZXIoaWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcInVzZXIvUmVtb3ZlXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICB1c2VfaWQ6IGlkXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgICAgICApXHJcbiAgICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICAgIH1cclxuICAgIGNoZWNrVXNlcih1c2VyLHB3ZCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgICAgICB0aGlzLmFwaVVybCArIFwidXNlci9DaGVja1wiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgdXNlcjogdXNlcixcclxuICAgICAgICAgICAgcHdkOiBwd2RcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckltZyhpZCxpbWcpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcInVzZXIvU2V0SW1nXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwcm1faWQ6IGlkLFxyXG4gICAgICAgICAgICBwcm1faW1nOiBpbWdcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlck5hbWUoaWQsbmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgICAgICB0aGlzLmFwaVVybCArIFwidXNlci9TZXROYW1lXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwcm1faWQ6IGlkLFxyXG4gICAgICAgICAgICBwcm1fbmFtZTogbmFtZVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyU2hhcmUoaWQsc2hhcmUpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcInVzZXIvU2V0U2hhcmVcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHBybV9pZDogaWQsXHJcbiAgICAgICAgICAgIHBybV9zaGFyZTogc2hhcmVcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gICAgfVxyXG4gIFxyXG5cclxuICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICAvLyBGSUNIRVxyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gICAgZ2V0RmljaGUoaWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcImZpY2hlL0dldFwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgZmljX2lkOiBpZFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgICB9XHJcbiAgICBhZGRGaWNoZSh0aXRyZSwgdXJsLCBtZWRpYXRlayl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgICAgICB0aGlzLmFwaVVybCArIFwiZmljaGUvQWRkXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBwcm1fdGl0cmU6IHRpdHJlLFxyXG4gICAgICAgICAgICBwcm1fdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIHBybV9tZWRpYXRlazogbWVkaWF0ZWtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlRmljaGUoaWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICAgICAgdGhpcy5hcGlVcmwgKyBcImZpY2hlL1JlbW92ZVwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgZmljX2lkOiBpZFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgICB9XHJcblxyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gIC8vIE1FRElBVEVLXHJcbiAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgZ2V0TWVkaWF0ZWsoaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJtZWRpYXRlay9HZXRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBtZWRpYXRla19pZDogaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIGdldE1lZGlhdGVrRmljaGVzKGlkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwibWVkaWF0ZWsvR2V0RmljaGVcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBtZWRpYXRla19pZDogaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIG1lZGlhdGVrQWRkRmljaGUobWVkX2lkLCBmaWNfaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJtZWRpYXRlay9BZGRGaWNoZVwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1lZGlhdGVrX2lkOiBtZWRfaWQsXHJcbiAgICAgICAgZmljX2lkOiBmaWNfaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIG1lZGlhdGVrUmVtb3ZlRmljaGUobWVkX2lkLCBmaWNfaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJtZWRpYXRlay9SZW1vdmVGaWNoZVwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1lZGlhdGVrX2lkOiBtZWRfaWQsXHJcbiAgICAgICAgZmljX2lkOiBmaWNfaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gIC8vIEdST1VQRVxyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gIGdldEdyb3VwZShpZCl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcImdyb3VwZS9HZXRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBncm9faWQ6IGlkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICBnZXRHcm91cGVVc2VycyhpZCl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcImdyb3VwZS9HZXRVc2Vyc1wiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGdyb19pZDogaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIHVzZXJHZXRHcm91cGVzKGlkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiZ3JvdXBlL1VzZXJHZXRHcm91cGVzXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgdXNlX2lkOiBpZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0R3JvdXBlSW1nKGlkLGltZyl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcImdyb3VwZS9TZXRJbWdcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBncm9faWQ6IGlkLFxyXG4gICAgICAgIHBybV9pbWc6IGltZ1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0R3JvdXBlTmFtZShpZCwgbmFtZSl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcImdyb3VwZS9TZXROYW1lXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgZ3JvX2lkOiBpZCxcclxuICAgICAgICBwcm1fbmFtZTogbmFtZVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0R3JvdXBlU2hhcmUoaWQsc2hhcmUpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJncm91cGUvU2V0U2hhcmVcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBncm9faWQ6IGlkLFxyXG4gICAgICAgIHBybV9zaGFyZTogc2hhcmVcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG4gIGdyb3VwZUFkZFVzZXIoZ3JvX2lkLCB1c2VfaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJncm91cGUvQWRkVXNlclwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGdyb19pZDogZ3JvX2lkLFxyXG4gICAgICAgIHVzZV9pZDogdXNlX2lkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICBncm91cGVSZW1vdmVVc2VyKGdyb19pZCwgdXNlX2lkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiZ3JvdXBlL1JlbW92ZVVzZXJcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBncm9faWQ6IGdyb19pZCxcclxuICAgICAgICB1c2VfaWQ6IHVzZV9pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgcmVtb3ZlR3JvdXBlKGlkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiZ3JvdXBlL1JlbW92ZVwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGdyb19pZDogaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0Q29tbW9uSGVhZGVycygpIH1cclxuICAgIClcclxuICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9ycyk7XHJcbiAgfVxyXG5cclxuICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICAvLyBOT1RFU1xyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gIGdldE5vdGVzKGlkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwibm90ZS9HZXRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBmaWNfaWQ6IGlkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICBhZGROb3RlKHVzZV9pZCwgZmljX2lkLCBub3RlKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwibm90ZS9BZGRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICB1c2VfaWQ6IHVzZV9pZCxcclxuICAgICAgICBmaWNfaWQ6IGZpY19pZCxcclxuICAgICAgICBwcm1fbm90ZTogbm90ZVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0Tm90ZShpZCwgbm90ZSl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcIm5vdGUvU2V0XCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbm90X2lkOiBpZCxcclxuICAgICAgICBwcm1fbm90ZTogbm90ZVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcblxyXG4gIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gIC8vIEFWSVNcclxuICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICBnZXRBdmlzKGlkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiYXZpcy9HZXRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBmaWNfaWQ6IGlkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICBhZGRBdmlzKHVzZV9pZCwgZmljX2lkLCBhdmlzKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiYXZpcy9BZGRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICB1c2VfaWQ6IHVzZV9pZCxcclxuICAgICAgICBmaWNfaWQ6IGZpY19pZCxcclxuICAgICAgICBwcm1fYXZpczogYXZpc1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0QXZpcyhpZCwgYXZpcyl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXHJcbiAgICAgICAgdGhpcy5hcGlVcmwgKyBcIm5vdGUvU2V0XCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbm90X2lkOiBpZCxcclxuICAgICAgICBwcm1fYXZpczogYXZpcyAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuXHJcbiAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgLy8gVmlzaW9ubmVyXHJcbiAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgZ2V0VmlzaW9ubmVyKHVzZV9pZCwgZmljX2lkKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwidmlzaW9ubmVyL0dldFwiICsgdGhpcy5hcHBLZXksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIHVzZV9pZDogdXNlX2lkLFxyXG4gICAgICAgIGZpY19pZDogZmljX2lkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICBhZGRWaXNpb25uZXIodXNlX2lkLCBmaWNfaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJ2aXNpb25uZXIvQWRkXCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgdXNlX2lkOiB1c2VfaWQsXHJcbiAgICAgICAgZmljX2lkOiBmaWNfaWQsXHJcbiAgICAgICAgcHJtX3N0YXR1czogMFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICB9XHJcbiAgc2V0VmlzaW9ubmVyKHVzZV9pZCwgZmljX2lkLCBzdGF0dXMpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgIHRoaXMuYXBpVXJsICsgXCJ2aXNpb25uZXIvU2V0XCIgKyB0aGlzLmFwcEtleSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgdXNlX2lkOiB1c2VfaWQsXHJcbiAgICAgICAgZmljX2lkOiBmaWNfaWQsXHJcbiAgICAgICAgcHJtX3N0YXR1czogc3RhdHVzXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldENvbW1vbkhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gIH1cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gICAgLy8gT01EQlxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICBvbWRiU2VhcmNoKHNlYXJjaCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxyXG4gICAgICAgICAgICB0aGlzLmFwaVVybCArIFwiT21kYi9TZWFyY2hcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHRpdHJlOiBzZWFyY2hcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgICAgIClcclxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcnMpO1xyXG4gICAgfVxyXG4gICAgb21kYkdldChuYW1lKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChcclxuICAgICAgICB0aGlzLmFwaVVybCArIFwiT21kYi9HZXRcIiArIHRoaXMuYXBwS2V5LFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICB0aXRyZTogbmFtZVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRDb21tb25IZWFkZXJzKCkgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3JzKTtcclxuICAgIH1cclxufSJdfQ==